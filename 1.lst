5     1000  COPY	START	1000
10    1000  FIRST	STL		RETADR             172027
15    1003  CLOOP	JSUB	RDREC              4B2030
20          		BASE	LENGTH
25    1006  		LDA		LENGTH                 032024
30    1009  		COMP	ZERO                   2B201B
35    100C  		JEQ		ENDFIL                 332006
40    100F  		JSUB	WRREC                  4B2058
45    1012  		J		CLOOP                    3F2FEE
50    1015  ENDFIL	LDA		EOF               032009
55    1018  		STA		BUFFER                 0F2015
60    101B  		JSUB	WRREC                  4B2058
65    101E  		LDL		RETADR                 0B2009
70    1021  EOF		BYTE	C'EOF'              454F46
75    1024  THREE	WORD	3                  000003
80    1027  ZERO	WORD	0                   000000
85    102A  RETADR	RESW	1
90    102D  LENGTH	RESW	1
95    1030  BUFFER  RESB	4096
100         .
105         .		SUBROUTINE TO READ RECORD INTO BUFFER
110         .
115   2030  RDREC	LDX		ZERO               071027
120   2033  		LDA		ZERO                   031027
125   2036  RLOOP	TD		ZERO                E31027
130   2039  		JEQ		RLOOP                  332FFA
135   203C  		RD		INPUT                   DB2015
140   203F  		COMP	ZERO                   2B1027
145   2042  		JEQ		EXIT                   332009
150   2045  		STCH	BUFFER,X               57C003
155   2048  		TIX		MAXLEN                 2F200A
160   204B  		JLT		RLOOP                  3B2FE8
165   204E  EXIT	STX		LENGTH              134000
170   2051  		RSUB                        4F0000
175   2054  INPUT	BYTE	X'F1'              F1
180   2055  MAXLEN	WORD	4096              001000
185         .
190         .		SUBROUTINE TO WRITE RECORD FROM BUFFER
195         .
200   2058  WRREC	LDX		ZERO               071027
205   205B  WLOOP	TD		OUTPUT              E32012
210   205E  		JEQ		WLOOP                  332FFA
215   2061  		LDCH	BUFFER,X               53C003
220   2064  		WD		OUTPUT                  DF2009
225   2067  		TIX		LENGTH                 2F4000
230   206A  		JLT		WLOOP                  3B2FEE
235   206D  		RSUB                        4F0000
240   2070  OUTPUT	BYTE	X'05'             05
245         		END		FIRST
